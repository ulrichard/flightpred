diff --git a/Makefile.am b/Makefile.am
index e987486..1bd243f 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -3,15 +3,17 @@ CONFIGURE_DEPENDENCIES = $(top_srcdir)/version.sh
 
 $(top_srcdir)/configure: $(top_srcdir)/version.sh
 
+SUBDIRS = src tools definitions samples ifs_samples/grib1 ifs_samples/grib1_mlgrib2 tests tigge examples/C
+if FORTRAN_MOD
+SUBDIRS += fortran 
+endif
+if F90_CHECK
+SUBDIRS += examples/F90
+endif
 if WITH_PERL
-  PERL_OPT = @PERLDIR@
-else
-  PERL_OPT =
+SUBDIRS += perl
 endif
 
-
-SUBDIRS = src tools definitions samples ifs_samples/grib1 ifs_samples/grib1_mlgrib2 tests tigge $(FORTRAN_MOD) examples/C $(F90_CHECK) $(PERL_OPT) 
-
 EXTRA_DIST = README AUTHORS LICENSE gpl-3.0.txt ChangeLog version.sh html \
                 src/extrules.am \
 				src/dummy.am \
diff --git a/configure.ac b/configure.ac
index 175a721..eb88eae 100755
--- a/configure.ac
+++ b/configure.ac
@@ -43,10 +43,6 @@ AC_DEFINE_UNQUOTED(GRIB_API_REVISION_VERSION,$GRIB_API_REVISION_VERSION,Grib Api
 AH_TEMPLATE([_LARGE_FILE_API],
 			[Needs to be undefined on some AIX])
 
-PERLDIR=perl
-AC_SUBST(PERLDIR)
-
-
 dnl Checks for programs.
 AC_PROG_CC(xlc_r xlc gcc cc) 
 AC_PROG_CPP
@@ -225,13 +221,8 @@ then
   without_fortran=1
 fi
 
-if test $without_fortran -ne 1
-then
-  FORTRAN_MOD=fortran
-  AC_SUBST(FORTRAN_MOD)
-  F90_CHECK="examples/F90"
-  AC_SUBST(F90_CHECK)
-fi
+AM_CONDITIONAL([F90_CHECK], [test $without_fortran -ne 1])
+AM_CONDITIONAL([FORTRAN_MOD], [test $without_fortran -ne 1])
 
 dnl EMOS
 AC_ARG_WITH([emos],
