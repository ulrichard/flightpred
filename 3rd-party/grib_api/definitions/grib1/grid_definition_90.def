# Copyright 2005-2007 ECMWF
#
# Licensed under the GNU Lesser General Public License which
# incorporates the terms and conditions of version 3 of the GNU
# General Public License.
# See LICENSE and gpl-3.0.txt for details.

# GRID DEFINITION Space view perspective or orthographic
# grib 1 -> 2
constant gridDefinitionTemplateNumber     = 90;

unsigned[2] Ni  : dump;
alias numberOfPointsAlongXAxis = Ni;
alias Nx = Ni;

unsigned[2] Nj  : dump;
alias numberOfPointsAlongYAxis = Nj;
alias Nx = Nj;

signed[3] latitudeOfSubSatellitePoint ;
meta geography.latitudeOfSubSatellitePointInDegrees  scale(latitudeOfSubSatellitePoint,oneConstant,grib1divider,truncateDegrees) : dump;
alias Lap=latitudeOfSubSatellitePoint;

signed[3] longitudeOfSubSatellitePoint ;
meta geography.longitudeOfSubSatellitePointInDegrees  scale(longitudeOfSubSatellitePoint,oneConstant,grib1divider,truncateDegrees) : dump;
alias Lap=longitudeOfSubSatellitePoint;

include "resolution_flags.def";

unsigned[3] apparentDiameterOfEarthInGridLengthsInXDirection  : dump;


unsigned[3] apparentDiameterOfEarthInGridLengthsInYDirection  : dump;

unsigned[2] xCoordinateOfSubSatellitePoint  : dump,no_copy;
meta g2xCoordinateOfSubSatellitePoint times(xCoordinateOfSubSatellitePoint,thousand);


unsigned[2] yCoordinateOfSubSatellitePoint  : dump,no_copy;
meta g2yCoordinateOfSubSatellitePoint times(yCoordinateOfSubSatellitePoint,thousand);

include "scanning_mode.def";

unsigned[3] orientationOfTheGridInMillidegrees ;
meta geography.orientationOfTheGridInDegrees  scale(orientationOfTheGridInMillidegrees,oneConstant,grib1divider,truncateDegrees) : dump;

unsigned[3] altitudeOfTheCameraFromTheEarthSCenterMeasuredInUnitsOfTheEarth  : dump;

unsigned[2] xCoordinateOfOriginOfSectorImage  : dump;

unsigned[2] yCoordinateOfOriginOfSectorImage  : dump;

#Ce      Length is normally 32 + stretched and/or rotated
#Ce      parameters + vertical coordinate parameters + list of
#Ce      numbers of points.
#Ce      (Lambert conformal and Mercator are 42 octets in length,
#Ce      while Space view is 40 for ECMWF (44 in GRIB specification)
if ( centre != 98 ) {
  pad padding_grid90_1(6);
}

meta numberOfDataPoints number_of_points(Ni,Nj,PLPresent,pl) : dump;
alias numberOfPoints=numberOfDataPoints;
meta numberOfValues number_of_values(values,bitsPerValue,numberOfDataPoints,bitmapPresent,bitmap,numberOfCodedValues) : dump;
alias ls.valuesCount=numberOfValues;

